<div class="flex is-space-between">
<sidebar class="is-one-fifth">

    <div class="filter flex-on-mobile is-space-between is-align-items">
        <div>
            <input type="search" oninput="liveSearch()" id="searchbox" placeholder="Search..">
            <script>
                function liveSearch() {
                    let cards = document.getElementsByClassName('cards')
                    let search_query = document.getElementById("searchbox").value;

                    for (var i = 0; i < cards.length; i++) {
                        if(cards[i].innerText.toLowerCase()
                                .includes(search_query.toLowerCase())) {
                            cards[i].classList.remove("is-hidden");
                        } else {
                            cards[i].classList.add("is-hidden");
                        }
                    }
                }
            </script>
        </div>

        <div onclick="toggleOfferInfo()" class="flex is-align-items">
            <input type="checkbox" id="offerToggle"> &nbsp;
            <label for="offerToggle">Show offer</label>
            <script>
                function toggleOfferInfo() {
                    let status = document.getElementById("offerToggle").checked
                    for (var i = 0; i < document.querySelectorAll('details').length; i++) {
                        document.querySelectorAll('details')[i].open = status
                    }
                }
            </script>   
        </div>
    </div>


    <div>
        <p class="marginless">Filter: </p>
        <ul class="tags">
            {{ range where .Site.Taxonomies.tags "Section" "stuff" }}
                <li><a href="{{ .Page.Permalink }}">{{ .Page.Title }}</a></li>
            {{ end }}
        </ul>
    </div>  
</sidebar> 


<main class="is-four-fifth ml5-on-desktop">
    <div class="v-distance">
    {{ if eq .Kind "term" }}
        <h1> Free {{ .Title }} for developer </h1>
        {{ range .Pages }}
            {{ partial "stuff-cards.html" . }}
        {{ end }}
    {{ else }}
       {{ range where .Site.RegularPages "Type" "stuff"}}
            {{ partial "stuff-cards.html" . }}
        {{ end }}
    {{ end }}

    </div>
</main>
</div>
